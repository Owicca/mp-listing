<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src = "https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
        <script src = "https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.3.3/backbone-min.js"></script>
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="style.css">
   
        <script>
            //This generates a csv of provided data)
            var data = [["name1", "city1", "some other info"], ["name2", "city2", "more info"]];
            var csvContent = "data:text/csv;charset=utf-8,";
            data.forEach(function(infoArray, index){

            dataString = infoArray.join(",");
            csvContent += index < data.length ? dataString+ "\n" : dataString;

            var encodedUri = encodeURI(csvContent);
            //window.open(encodedUri);

        }); 
        </script>


        <script type="text/template" id="data_template">
        
        <tr>
            <td><%= name %></td>
            <td><p><strong><%= district_name %></strong></td>
            <td><p>
                <% if (party_name == "NDP") { %>
                    <img height="10" src="images/ndp-logo.png"/>
                <% } %>
                <% if (party_name == "Liberal") { %>
                    <img height="10" src="images/liberal-logo.png"/>
                <% } %>
                <% if (party_name == "Conservative") { %>
                    <img height="10" src="images/conservative-logo.png"/>
                <% } %>
                <% if (party_name == "Green Party") { %>

                    <img height="10" src="images/green-logo.gif"/>
                <%}%>
                <% if (party_name == "Bloc Québécois") { %>
                    <img height="10" src="images/bloc-logo.png"/>
                <%}%>
            </p></td>
            <td><p><%= email %></p></td>
       
                <% _.each(offices, function(office){ %> //Loops through office data
                    <td>
                        <p><span class="office"><%= office.type %></span></p>
                        <p> <strong>Phone:</strong> <%= office.tel %></p>
                        <p> <strong>Fax:</strong> <%= office.fax %></p>
                        <p> <strong>Address:</strong> <%= office.postal %></p>
                    </td>
                <% }); %>    
            </tr>
        </script>
    </head>
    <body>
        <section class="data">
            <table class="table table-striped">
                <tr>
                <th>Name</th>
                <th>Riding</th>
                <th>Party</th>
                <th>Email</th>
                <th colspan="4">Offices</th>
            </table>
            <div class="data_container">
                <label>Filter by party</label>
                 <select id="party-filter">
                    <option value="Reset">Reset Filter</option>
                    <option value="Liberal">Liberal</option>
                    <option value="Conservative">Conservative</option>
                    <option value="NDP">NDP</option>
                    <option value="Bloc Québécois">Bloc Québécois</option>
                    <option value="Green Party">Green Party</option>
                 </select>
                 &nbsp;
                 <label>Filter by riding</label>
                 <input id="riding-filter" type=""/><button id="riding-submit">reset</button>
                <table class="table table-striped table-responsive">
                    <tbody class="data_row"></tbody>
                </table>
            </div>
        </section>
        <script src ="assets/csvGen/app.js"></script>
    </body>
</html>